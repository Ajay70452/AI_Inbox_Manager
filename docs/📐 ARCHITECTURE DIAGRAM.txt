?? ARCHITECTURE DIAGRAM — AI Inbox Manager
                       ?????????????????????????????????
                       ?           Web Frontend         ?
                       ?  (React / Next.js Dashboard)   ?
                       ?????????????????????????????????
                                       ?
                                       ?
???????????????????????????????????????????????????????????????????????????????
?                             Backend API Layer                               ?
?                         (Node.js / Python / FastAPI)                        ?
???????????????????????????????????????????????????????????????????????????????
?                                  ?                                          ?
?                                  ?                                          ?
?                 ???????????????????????????????????           ??????????????????????????
?                 ?     Authentication Service      ?           ?   Integrations Service ?
?                 ? (OAuth for Gmail & Outlook)     ?           ? (Slack, ClickUp, Notion?
?                 ?  Token Vault (encrypted store)  ?           ?   Jira, Trello APIs)   ?
?                 ???????????????????????????????????           ??????????????????????????
?                                  ?                                          ?
?                                  ?                                          ?
?                 ???????????????????????????????????           ??????????????????????????
?                 ?   Email Sync + Threads Service  ?           ? Company Context Engine ?
?                 ?   (Gmail API / Graph API sync)  ?           ?   (Policies, FAQ, Tone ?
?                 ? Incremental refresh + Webhooks  ?           ?  Products, Roles)      ?
?                 ???????????????????????????????????           ??????????????????????????
?                                  ?                                          ?
???????????????????????????????????????????????????????????????????????????????
?                                  ?                                          ?
?                                  ?                                          ?
?                   ??????????????????????????                 ????????????????????????????
?                   ?     AI Orchestration   ?                 ?     LLM Processing       ?
?                   ?  (Prompt router layer) ?                 ? (Summaries, Replies,     ?
?                   ?                        ?                 ?  Sentiment, Tasks,       ?
?                   ? Handles:                ?                 ?  Classification)         ?
?                   ? - prompt templates     ?                 ????????????????????????????
?                   ? - context mixing       ?
?                   ? - rate limiting        ?
?                   ??????????????????????????
?
???????????????????????????????????????????????????????????????????????????????
?                                  Data Layer                                ?
?           ???????????????????????????????????????????????????????????????  ?
?           ?                      ?                         ?            ?  ?
?           ?                      ?                         ?            ?  ?
?   ???????????????      ????????????????????      ?????????????????? ???????????????
?   ?PostgreSQL DB?      ? Redis Queue/Cache?      ? Blob Storage   ? ?Token Vault ??
?   ? Users       ?      ? Email sync jobs  ?      ? Email body/html? ?Encrypted   ??
?   ? Context     ?      ? AI tasks         ?      ? Attachments    ? ?Store       ??
?   ? Threads     ?      ? Slack tasks      ?      ? Logs           ? ?            ??
?   ???????????????      ????????????????????      ?????????????????? ???????????????
???????????????????????????????????????????????????????????????????????????????

                       ?                               ?
                       ?                               ?
                       ?                               ?
      ??????????????????????????????????     ????????????????????????????????
      ?       Chrome Extension         ?     ?    Third-Party Services       ?
      ?  (Sidebar in Gmail/Outlook)    ?     ?   Gmail API / Outlook Graph   ?
      ?Shows: summary, reply, tasks    ?     ?   Slack API / ClickUp / Notion?
      ?Sends actions to backend        ?     ?   Jira / Trello               ?
      ??????????????????????????????????     ?????????????????????????????????


?? Component Breakdown
1. Chrome Extension
* Injects sidebar in Gmail/Outlook web UI
* Displays:
o AI summary
o Priority label
o Sentiment alert
o Auto-reply draft
o Extracted tasks
* Sends user actions ? Backend API
No heavy logic, lightweight UI only.

2. Web App (Frontend)
* Company context setup
* Slack/ClickUp/Notion integration settings
* View email summaries
* Manage tokens
* Admin/settings
* Basic analytics

3. Authentication Service
Handles:
* Gmail OAuth
* Microsoft OAuth
* Refresh tokens
* Encryption
* Token expiry
Stores tokens securely in Token Vault.

4. Email Sync Service
* Uses Gmail API + Microsoft Graph
* Fetches emails incrementally
* Normalizes threads
* Triggers AI tasks
* Stores data in DB + Blob storage
Runs on:
* Webhooks
* Cron jobs
* Redis queue workers

5. AI Orchestration Layer
This is your “secret sauce”.
It:
* Builds prompts
* Injects company context
* Injects historical replies
* Routes to right LLM
* Handles retry logic
* Ensures consistent output structure

6. LLM Processing
Separate microservice or module.
Jobs:
* Thread summarization
* Sentiment + urgency detection
* Priority classification
* Task extraction
* Auto-reply generation
Uses tools like:
* OpenAI
* Claude
* Gemini

7. Integrations Service
Handles all external APIs:
* Slack alerts (via webhook or API)
* ClickUp tasks
* Notion database updates
* Jira issue creation
* Trello cards
This keeps integrations modular.

8. Database Layer
PostgreSQL
Stores:
* Users
* Email threads
* Summaries
* Company context
* Task metadata
* AI logs
Redis
* Background jobs
* Rate limits
* Caches
Storage (S3 / GCS / Supabase Storage)
* Raw HTML email content
* Attachments
* AI logs

?? How the System Works (High Level Flow)
1. User connects Gmail ? OAuth
2. Sync service fetches emails
3. Each new email triggers:
* Summarization
* Priority classification
* Sentiment analysis
* Task extraction
* Reply drafting
* Escalation check
4. Outputs stored in DB
5. Chrome extension displays everything inside Gmail
6. Escalations sent to Slack
7. Tasks pushed to Notion/ClickUp/Jira

