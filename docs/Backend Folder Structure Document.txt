ğŸ“˜ Backend Folder Structure Document (FastAPI + PostgreSQL + Redis + Workers)
Version: 1.0
Backend: FastAPI (Python 3.10+)
DB: PostgreSQL
Queue: Redis + RQ/Celery
Storage: S3 / R2
Auth: OAuth2 + JWT

ğŸ“ 1. Root Folder Structure
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ dependencies.py
â”‚   â”œâ”€â”€ middleware.py
â”‚   â”œâ”€â”€ router.py
â”‚   â”œâ”€â”€ __init__.py
â”‚
â”œâ”€â”€ routers/
â”œâ”€â”€ services/
â”œâ”€â”€ workers/
â”œâ”€â”€ models/
â”œâ”€â”€ schemas/
â”œâ”€â”€ utils/
â”œâ”€â”€ core/
â”œâ”€â”€ db/
â”œâ”€â”€ tests/
â”œâ”€â”€ scripts/
â”œâ”€â”€ static/
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ Dockerfile
â””â”€â”€ README.md
Now let's break each folder down.

ğŸ“‚ 2. app/ â€” Application Setup & Entry Point
app/
â”‚â”€â”€ main.py
â”‚â”€â”€ config.py
â”‚â”€â”€ dependencies.py
â”‚â”€â”€ middleware.py
â”‚â”€â”€ router.py
â””â”€â”€ __init__.py
What each file does:

ğŸ“‚ 3. routers/ â€” All API Endpoints
routers/
â”œâ”€â”€ auth.py
â”œâ”€â”€ users.py
â”œâ”€â”€ emails.py
â”œâ”€â”€ threads.py
â”œâ”€â”€ context.py
â”œâ”€â”€ ai.py
â”œâ”€â”€ integrations.py
â”œâ”€â”€ slack.py
â”œâ”€â”€ gmail.py
â””â”€â”€ outlook.py
Folder Purpose
All REST endpoints exposed to your frontend + extension.
API responsibilities:
This keeps your backend modular and readable.

ğŸ“‚ 4. services/ â€” Business Logic Layer
services/
â”œâ”€â”€ gmail_service.py
â”œâ”€â”€ outlook_service.py
â”œâ”€â”€ slack_service.py
â”œâ”€â”€ clickup_service.py
â”œâ”€â”€ notion_service.py
â”œâ”€â”€ ai_orchestrator.py
â”œâ”€â”€ summarizer.py
â”œâ”€â”€ classifier.py
â”œâ”€â”€ task_extractor.py
â””â”€â”€ reply_generator.py
This folder contains:
Core logic
External API clients
LLM prompt builders
Email sync pipeline steps
Responsibilities:
This folder = the brain of your application.

ğŸ“‚ 5. workers/ â€” Background Jobs
workers/
â”œâ”€â”€ email_sync_worker.py
â”œâ”€â”€ ai_worker.py
â”œâ”€â”€ slack_worker.py
â””â”€â”€ schedule.py
Responsibilities:
Workers decouple your backend from long-running tasks.
This prevents API from blocking.

ğŸ“‚ 6. models/ â€” Database ORM Models
models/
â”œâ”€â”€ user.py
â”œâ”€â”€ account_tokens.py
â”œâ”€â”€ email.py
â”œâ”€â”€ thread.py
â”œâ”€â”€ company_context.py
â”œâ”€â”€ integration.py
â””â”€â”€ base.py
Uses SQLAlchemy 2.0 or SQLModel.
Key tables:

ğŸ“‚ 7. schemas/ â€” Pydantic Data Schemas
schemas/
â”œâ”€â”€ auth.py
â”œâ”€â”€ email.py
â”œâ”€â”€ thread.py
â”œâ”€â”€ ai.py
â”œâ”€â”€ context.py
â””â”€â”€ user.py
Schemas ensure:
Strong typing
Clean API contracts
Validation for frontend <-> backend

ğŸ“‚ 8. core/ â€” Core Logic & Security Layer
core/
â”œâ”€â”€ security.py
â”œâ”€â”€ oauth.py
â”œâ”€â”€ auth_utils.py
â”œâ”€â”€ rate_limiting.py
â””â”€â”€ exceptions.py
Responsibilities:
JWT issuing
Password hashing
OAuth helper functions
Custom exceptions
Rate limiting (Redis)

ğŸ“‚ 9. db/ â€” Database Initialization
db/
â”œâ”€â”€ session.py
â”œâ”€â”€ migrations/
â””â”€â”€ init_db.py
Using:
PostgreSQL
Alembic migrations
Handles DB session lifecycle.

ğŸ“‚ 10. utils/ â€” Utility Functions
utils/
â”œâ”€â”€ email_parser.py
â”œâ”€â”€ html_cleaner.py
â”œâ”€â”€ token_encryption.py
â”œâ”€â”€ logging.py
â””â”€â”€ time.py
Especially important:
HTML email â†’ clean text
Attachment parsing
Encrypting Gmail/Outlook refresh tokens

ğŸ“‚ 11. scripts/ â€” Admin Scripts
scripts/
â”œâ”€â”€ create_admin.py
â”œâ”€â”€ test_oauth.py
â””â”€â”€ manual_sync.py
Useful for debugging.

ğŸ“‚ 12. tests/ â€” Full Test Suite
tests/
â”œâ”€â”€ unit/
â”œâ”€â”€ integration/
â””â”€â”€ e2e/
Use:
pytest
HTTPX test client

ğŸ—ï¸ Final Folder Structure Snapshot (Clean Version)
backend/
â”œâ”€â”€ app/
â”œâ”€â”€ routers/
â”œâ”€â”€ services/
â”œâ”€â”€ workers/
â”œâ”€â”€ models/
â”œâ”€â”€ schemas/
â”œâ”€â”€ core/
â”œâ”€â”€ db/
â”œâ”€â”€ utils/
â”œâ”€â”€ tests/
â”œâ”€â”€ scripts/
â”œâ”€â”€ requirements.txt
â””â”€â”€ Dockerfile

